\input{estilo/estilo.tex}

\title{Informe tarea 1} % Nombre archivo en Overleaf
\newcommand{\ramo}{EL7008-1 Procesamiento Avanzado de Imágenes}
\newcommand{\departamento}{Departamento de Ingeniería Eléctrica}
\newcommand{\semestre}{Semestre Primavera 2020}

\newcommand{\hipertitulo}{}
\newcommand{\titulo}{Tarea 1} 
\newcommand{\subtitulo}{Piramides de \textit{Gauss} y \textit{Laplace}}

\newcommand{\autor}{Diego Irarrázaval I.}


\input{estilo/header.tex}
\input{estilo/program-leng.tex}


%\linespread{1.2} 				% Interlineado
%\setlength\parindent{0pt} 		% Longitud sangría

\begin{document}
%----------------------------------------------------------------------
%	Portada
%----------------------------------------------------------------------
\input{estilo/portada.tex}
%----------------------------------------------------------------------
%	Documento
%----------------------------------------------------------------------

\pagenumbering{Roman}
\setcounter{page}{1}
\tableofcontents 
\newpage
\listoffigures
\listoftables
\lstlistoflistings

%\addcontentsline{toc}{chapter}{Nombre Sección} % Para forzar aparición en el Índice

\newpage
\pagenumbering{arabic}
\setcounter{page}{1}

\newpage
\section{Introducción}

% \par Describir brevemente lo que se realizará en la tarea
\par En esta tarea, se implementará el cálculo de pirámides de \textit{Gauss} y \textit{Laplace} de una imagen y, luego, se reconstruirán a partir de dichas pirámides. Para lograr esto, se deberá implementar también la convolución en dos dimensiones. 
\par Los principales objetivos corresponden en primer lugar a introducir algunas formas de representaciones multi-resolución calculadas a partir de una images e implementar operaciones desde cero (por ejemplo la convolución) que usualmente se cargan con librerías. 

% \par Enumeración y explicación de las secciones que siguen
\bigskip

\par El informe comienza con el marco teórico donde se expone brevemente sobre la convolución, la pirámide de Gauss, la pirámide de Laplace y la reconstrucción de la imagen. 

\par A continuación, la sección desarollo se divide en tres sub-secciones:
\begin{enumerate}
  \item Pirámide de Gauss.
  \item Pirámide de Laplace.
  \item Reconstrucción imagen. 
\end{enumerate}

\par En las secciones enumeradas anteriormente, se incluye tanto el código implementado como análisis teórico de lo desarrollado. 

\par Finalmente, se presentan las conclusiones del desarrollo de la tarea 1. 

\newpage
\section{Marco Teórico}
\subsection{Cnvolución}

\par En matemáticas, la convolución es una operación que recibe dos funciones ($f$ y $g$) y entrega una tercera función ($f \: \ast \: g $) que describe como la forma de una es influida por la otra \cite{WikiConv}.
\par En procesamiento de señales, se puede entender como afecta se ve afectada señal  pasar por un filtro. Para entender, es útil la siguiente ilustración: 

\par Describir operación de convolución
\par Describir brevemente cálculo de la pirámide de Gauss
\par Describir brevemente cálculo de la pirámide de Laplace
\par Describir brevemente reconstrucción de la imagen original


\newpage
\section{Desarrollo}
\subsection{Pirámide de \textit{Gauss}:}

\subsubsection*{Convolución:}
\par A continuación, se presenta el código de la implementación de la convolución:

\begin{lstlisting}[language=Python, label = convCode, caption=Implementación de convolución en Cython.]
  cpdef float[:, :] convolution_cython(float [:, :] input, float [:, :] mask):
  cdef int a, b, r, c, rows, cols, row_init, col_init, i, j,
  cdef float sum
  # Imagen de salida
  cdef np.ndarray output=np.zeros([input.shape[0], input.shape[1]], dtype = np.float32)

  # Posicion a partir de la cual se puede realizar convolucion: 
  # Ejemplo 1: Para un kernel de 3x3, es (1,1).
  # Ejemplo 2: Para un kernel de "a" x "b" es ("r"//2, "c"//2)
  a = mask.shape[0]
  b = mask.shape[1]

  row_init = a // 2
  col_init = b // 2

  # tamano de la imagen
  rows = input.shape[0]
  cols = input.shape[1]

  sum = 0

  # Recorremos la imagen input:
  for r in range(row_init, rows - row_init):
    for c in range(col_init, cols - col_init):
      # Se recorre la mascara o kernel:
      for i in range(a):
        for j in range(b):
          sum += mask[i,j] * input[r-i,c-j]
      # Guardamos el resultado de la suma correspondiente en el arreglo output:
      output[r, c] = sum
      sum = 0
  return output
\end{lstlisting}

\par La implementación en \ref{convCode}, corresponde a la convolución en dos dimensiones con padding. 

\par
- Describir implementación de convolución, incluyendo código
- Describir implementación de cálculo de máscaras, incluyendo código
- Describir implementación de suavizado de imágenes, incluyendo código
- Describir implementación de submuestreo, incluyendo código
- Describir implementación de pirámide de Gauss, incluyendo código
- Describir implementación: graficar pirámide de Gauss, incluyendo código
- Prueba del sistema de cálculo de pirámide de Gauss sobre 4 imágenes entregadas, incluir las
imágenes de las pirámides resultantes en el informe
- Análisis del desempeño del cálculo de la pirámide de Gauss, analizando las imágenes resultantes


\subsection{Pirámide de \textit{Laplace}:}
- Describir implementación de resta de imágenes, incluyendo código
- Describir implementación de pirámide de Laplace, incluyendo código
- Describir implementación de valor absoluto y escalamiento, incluyendo código
- Describir implementación: graficar pirámide de Laplace, incluyendo código
- Prueba del sistema de cálculo de pirámide de Laplace sobre 4 imágenes entregadas, incluir las
imágenes de las pirámides resultantes en el informe
- Análisis del desempeño del cálculo de la pirámide de Laplace, analizando las imágenes resultantes

\begin{python}
  from google.colab import files
  uploaded = files.upload() #elegimos el archivo en el directorio correcto
  
  !unzip EMG_data_for_gestures-master.zip #descomprimimos
  \end{python}

\subsection{Reconstrucción imagen:}
- Describir implementación de suma de imágenes, incluyendo código
- Describir implementación de duplicación de tamaño de imágenes con interpolación, incluyendo
código
- Describir implementación de reconstrucción de imagen original, incluyendo código
- Prueba del sistema de reconstrucción de la imagen original usando las pirámides de las cuatro
imágenes entregadas, incluir las imágenes reconstruidas en el informe
- Análisis del resultado de la reconstrucción respecto a las imágenes originales


\section{Conclusión}


\newpage
\begin{thebibliography}{X}
    \bibitem{WikiConv} Wikipedia: Convolution. \\
    \url{https://en.wikipedia.org/wiki/Convolution#Visual_explanation} 

\end{thebibliography}

\section{Anexos}
\end{document}